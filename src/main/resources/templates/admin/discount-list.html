<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Admin Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
<!--    <link th:href="@{/admin/css/style.css}" rel="stylesheet">-->
</head>

<body>
<!-- Sidebar -->
<div th:replace="~{admin/common/menu}"></div>
<main class="main-content p-4" id="main-content" th:fragment="discount-content">
    <div th:replace="~{admin/common/header}"></div>

    <div class="form-group mb-4">
        <label for="discountName" class="form-label fw-bold">Tên mã giảm giá</label>
        <input type="text" id="discountName" name="name" class="form-control"
               placeholder="Nhập tên mã giảm giá" required>
    </div>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="h3">Danh sách mã giảm giá</h1>
        <a href="/admin/discounts/create" class="btn btn-primary">
            <i class="fa-solid fa-plus"></i> Thêm mã giảm giá
        </a>
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead class="table-dark">
            <tr>
                <th>Tên</th>
                <th>Phần trăm giảm giá</th>
                <th>Mô tả</th>
                <th>Hành động</th>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="discount : ${discounts.content}">
                <tr>
                    <td th:text="${discount.name}"></td>
                    <td th:text="${discount.discountPercent}"></td>
                    <td th:text="${discount.description}"></td>
                    <td>
                        <a th:href="@{/admin/discounts/edit/{id}(id=${discount.id})}" class="btn btn-sm btn-warning">
                            <i class="fa-solid fa-edit"></i> Sửa
                        </a>
                        <a th:href="@{/admin/discounts/delete/{id}(id=${discount.id})}" class="btn btn-sm btn-danger">
                            <i class="fa-solid fa-trash"></i> Xóa
                        </a>
                    </td>
                </tr>
            </th:block>
            </tbody>
        </table>
    </div>

    <!-- Thanh phân trang -->
    <nav class="mt-4">
        <ul class="pagination justify-content-center">
            <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                <a class="page-link" th:href="@{/admin/discounts?page=0}">First</a>
            </li>
            <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                <a class="page-link" th:href="@{/admin/discounts(page=${currentPage - 1})}">Previous</a>
            </li>
            <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                <a class="page-link" th:href="@{/admin/discounts(page=${currentPage + 1})}">Next</a>
            </li>
            <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                <a class="page-link" th:href="@{/admin/discounts(page=${totalPages - 1})}">Last</a>
            </li>
        </ul>
    </nav>

    <!-- Hiển thị thông tin phân trang -->
    <p class="text-center mt-2">
        Trang <span class="fw-bold" th:text="${currentPage + 1}"></span> / <span th:text="${totalPages}"></span> <br>
        Tổng số: <span th:text="${totalItems}"></span> mục
    </p>

</main>
</body>
</html>
